<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>NutRemind</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 10px;
      background-color: #f5f5f5;
    }

    h1 {
      text-align: center;
      font-weight: bold;
      margin: 20px 0 5px;
    }

    .subtitle {
      text-align: center;
      margin-bottom: 30px;
      font-size: 1.1em;
      color: #444;
    }

    .day-section {
      margin-bottom: 30px;
      padding: 10px;
      background: #ffffff;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .day-title {
      font-weight: bold;
      font-size: 1.2em;
      margin-bottom: 15px;
      color: #006400;
      text-align: center;
    }

    .meals-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: space-between;
      align-items: center;
    }

    .meal-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      flex: 1;
      min-width: 60%;
    }

    .meal-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .meal-box {
      flex: 1;
      height: 50px;
      background-color: #ffffff;
      border: 2px solid #006400;
      border-radius: 10px;
    }

    .checkbox {
      transform: scale(1.5);
      cursor: pointer;
    }

    .progress-wrapper {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #ccc;
      position: relative;
      align-self: center;
    }

    .progress-circle {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(#4CAF50 0% 0%, #ccc 0% 100%);
    }

    .top-left-button {
        position: absolute;
        top: 15px;
        left: 15px;
        background-color: #006400;
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        text-decoration: none;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        transition: background-color 0.3s;
    }

    .top-left-button:hover {
        background-color: #228B22;
    }
    
    #mostrarComidaBtn {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 10px 15px;
      font-size: 16px;
    }

    /* Responsive para m√≥vil */
    @media (max-width: 600px) {
      .meals-container {
        flex-direction: column;
        align-items: center;
      }

      .meal-list {
        width: 100%;
      }

      .meal-box {
        height: 45px;
      }

      .checkbox {
        transform: scale(1.4);
      }
    }
  </style>

  <!-- Firebase -->
  <!-- Firebase -->
  <!-- Firebase -->
  <!-- Firebase -->

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";
    import { getFirestore, collection, getDoc,doc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCH32pB5Dk7cqHkaTv4SpWCHFsFrSKX9Qw",
        authDomain: "nutrisaoapp.firebaseapp.com",
        projectId: "nutrisaoapp",
        storageBucket: "nutrisaoapp.firebasestorage.app",
        messagingSenderId: "508649226829",
        appId: "1:508649226829:web:cfa0f7c95da012ff2f9204"
    };
  
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database=getFirestore(app);
    const user = auth.currentUser;
  
    onAuthStateChanged(auth, async(user) => {
      if (user) {
        // encodeURIComponent
        window.email = user.email; 
        alert("‚úÖ Usuario identificado:" + window.email);
        // Paso 1: Obtener dato
        // Paso 2: Poner bot√≥n
        // Paso 3: Mandar la alerta al presionar el bot√≥n
        
        // Obteniendo datos de base de datos
        // Obteniendo datos de base de datos
        // Obteniendo datos de base de datos
        // Obteniendo datos de base de datos

        const docRef = doc(database, "usuarios", window.email, "Lunes", "datosLunes");
        // const docRefM = doc(database, "usuarios", window.email, "Martes", "datosMartes");
        // const docRefMi = doc(database, "usuarios", window.email, "Miercoles", "datosMiercoles");
	      // const docRefJ = doc(database, "usuarios", window.email, "Jueves", "datosJueves");
        // const docRefV = doc(database, "usuarios", window.email, "Viernes", "datosViernes");
	      // const docRefS = doc(database, "usuarios", window.email, "Sabado", "datosSabado");
        // const docRefD = doc(database, "usuarios", window.email, "Domingo", "datosDomingo");

        // Obteniendo Snapshot

        const docSnap = await getDoc(docRef);
        // const docSnapM = await getDoc(docRefM);
        // const docSnapMi = await getDoc(docRefMi);
        // const docSnapJ = await getDoc(docRefJ);
        // const docSnapV = await getDoc(docRefV);
        // const docSnapS = await getDoc(docRefS);
        // const docSnapD = await getDoc(docRefD);

        // Obteniendo dato Lunes
        // Obteniendo dato Lunes
        const data =docSnap.data();
        // const dataM = docSnapM.data();
        // const dataMi = docSnapMi.data();
        // const dataJ = docSnapJ.data();
        // const dataV = docSnapV.data();
        // const dataS = docSnapS.data();
        // const dataD = docSnapD.data();

        // alert("Datos: " + JSON.stringify(data));
        const comidas = data.Comidas;
        const horarios = data.Horarios;
        // Alertas de los datos, alertaaaaaaaaaaa
        // Alertas de los datos, alertaaaaaaaaaaa
        // alert("Comidas: " + JSON.stringify(comidas));
        // alert("Horarios: " + JSON.stringify(horarios));
        // Alertas de los datos, alertaaaaaaaaaaa
        // Alertas de los datos, alertaaaaaaaaaaa
        window.comida1 = comidas["Comida 1"];
        window.comida2 = comidas["Comida 2"];
        window.comida3 = comidas["Comida 3"];
        window.comida4 = comidas["Comida 4"];

        const convertirHorario = (timestamp) => {
          if (!timestamp?.toDate) return "Hora inv√°lida";
          const date = timestamp.toDate();
          const horas = date.getHours().toString().padStart(2, '0');
          const minutos = date.getMinutes().toString().padStart(2, '0');
          return `${horas}:${minutos}`;
        };
        window.horario1 = convertirHorario(horarios["Horario 1"]);
        window.horario2 = convertirHorario(horarios["Horario 2"]);
        window.horario3 = convertirHorario(horarios["Horario 3"]);
        window.horario4 = convertirHorario(horarios["Horario 4"]);

        alert("Comida 1: " + window.comida1+ " Comida 2: "+ window.comida2 
          + " Comida 3: "+ window.comida3+ " Comida 4: "+ window.comida4);
        
        alert("üïê Horario 1: " + window.horario1 + 
            "\nüïê Horario 2: " + window.horario2 + 
            "\nüïê Horario 3: " + window.horario3 + 
            "\nüïê Horario 4: " + window.horario4);
        actualizarComidasLunes();
      }
    });
  </script>
  

</head>

<body> 

  <h1>NutriAr</h1>
  <div class="subtitle">Hola, bienvenido a tu recordatorio de confianza</div>

  <!-- D√≠a: Lunes -->
  <!-- D√≠a: Lunes -->
  <!-- D√≠a: Lunes -->
  <!-- D√≠a: Lunes -->

  <div class="day-section" data-day="lunes">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Lunes.html" class="register-icon-link">üìù</a>
        <span>Lunes</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
  
      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <script>
    function actualizarComidasLunes(){
      const comidasLunes = [
        window.comida1 + window.horario1 || "Comida 1 no disponible",
        window.comida2 + window.horario2 || "Comida 2 no disponible",
        window.comida3 + window.horario3 || "Comida 3 no disponible",
        window.comida4 + window.horario4 || "Comida 4 no disponible"
      ];
      const lunesSection = document.querySelector('.day-section[data-day="lunes"]');
  
      if (lunesSection) {
        const mealBoxes = lunesSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasLunes[index];
        });
      }
    };
  </script>

  <!-- D√≠a: Martes -->
  <!-- D√≠a: Martes -->
  <!-- D√≠a: Martes -->
  <!-- D√≠a: Martes -->
   
  <div class="day-section" data-day="martes">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Martes.html" class="register-icon-link">üìù</a>
        <span>Martes</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
      

      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <!-- <script>
    function actualizarComidasMartes(){
      const comidasMartes = [
        window.comida1 || "Comida 1 no disponible",
        window.comida2 || "Comida 2 no disponible",
        window.comida3 || "Comida 3 no disponible",
        window.comida4 || "Comida 4 no disponible"
      ];
      const martesSection = document.querySelector('.day-section[data-day="martes"]');
  
      if (martesSection) {
        const mealBoxes = martesSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasMartes[index];
        });
      }
    };
  </script> -->

  <!-- D√≠a: Mi√©rcoles -->
  <!-- D√≠a: Mi√©rcoles -->
  <!-- D√≠a: Mi√©rcoles -->
  <!-- D√≠a: Mi√©rcoles -->

  <div class="day-section" data-day="miercoles">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Miercoles.html" class="register-icon-link">üìù</a>
        <span>Miercoles</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
  
      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <!-- <script>
    function actualizarComidasMiercoles(){
      const comidasMiercoles = [
        window.comida1 || "Comida 1 no disponible",
        window.comida2 || "Comida 2 no disponible",
        window.comida3 || "Comida 3 no disponible",
        window.comida4 || "Comida 4 no disponible"
      ];
      const miercolesSection = document.querySelector('.day-section[data-day="miercoles"]');
  
      if (miercolesSection) {
        const mealBoxes = miercolesSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasMiercoles[index];
        });
      }
    };
  </script> -->

  <!-- D√≠a: Jueves -->
  <!-- D√≠a: Jueves -->
  <!-- D√≠a: Jueves -->
  <!-- D√≠a: Jueves -->

  <div class="day-section" data-day="jueves">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Jueves.html" class="register-icon-link">üìù</a>
        <span>Jueves</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
  
      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <!-- <script>
    function actualizarComidasJueves(){
      const comidasJueves = [
        window.comida1 || "Comida 1 no disponible",
        window.comida2 || "Comida 2 no disponible",
        window.comida3 || "Comida 3 no disponible",
        window.comida4 || "Comida 4 no disponible"
      ];
      const juevesSection = document.querySelector('.day-section[data-day="jueves"]');
  
      if (juevesSection) {
        const mealBoxes = juevesSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasJueves[index];
        });
      }
    };
  </script> -->


  <!-- D√≠a: Viernes -->
  <!-- D√≠a: Viernes -->
  <!-- D√≠a: Viernes -->
  <!-- D√≠a: Viernes -->

  <div class="day-section" data-day="viernes">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Viernes.html" class="register-icon-link">üìù</a>
        <span>Viernes</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
  
      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <!-- <script>
    function actualizarComidasViernes(){
      const comidasViernes = [
        window.comida1 || "Comida 1 no disponible",
        window.comida2 || "Comida 2 no disponible",
        window.comida3 || "Comida 3 no disponible",
        window.comida4 || "Comida 4 no disponible"
      ];
      const viernesSection = document.querySelector('.day-section[data-day="viernes"]');
  
      if (viernesSection) {
        const mealBoxes = viernesSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasViernes[index];
        });
      }
    };
  </script> -->
    
  <!-- D√≠a: S√°bado -->
  <!-- D√≠a: S√°bado -->
  <!-- D√≠a: S√°bado -->
  <!-- D√≠a: S√°bado -->

  <div class="day-section" data-day="sabado">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Sabado.html" class="register-icon-link">üìù</a>
        <span>Sabado</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
  
      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <!-- <script>
    function actualizarComidasSabado(){
      const comidasSabado = [
        window.comida1 || "Comida 1 no disponible",
        window.comida2 || "Comida 2 no disponible",
        window.comida3 || "Comida 3 no disponible",
        window.comida4 || "Comida 4 no disponible"
      ];
      const sabadoSection = document.querySelector('.day-section[data-day="sabado"]');
  
      if (sabadoSection) {
        const mealBoxes = sabadoSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasSabado[index];
        });
      }
    };
  </script> -->


  <!-- D√≠a: Domingo -->
  <!-- D√≠a: Domingo -->
  <!-- D√≠a: Domingo -->
  <!-- D√≠a: Domingo -->

  <div class="day-section" data-day="domingo">
    <!-- T√≠tulo del d√≠a y enlace a la cuenta -->
    <div class="day-title" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
        <a href="Register_screen_Domingo.html" class="register-icon-link">üìù</a>
        <span>Domingo</span>
    </div>
  
    <!-- Contenedor de comidas -->
    <div class="meals-container">
      <div class="meal-list">
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
        <div class="meal-item">
          <div class="meal-box"></div>
          <input type="checkbox" class="checkbox" onchange="updateCircle(this)">
        </div>
      </div>
  
      <!-- Contenedor del progreso -->
      <div class="progress-wrapper">
        <div class="progress-circle"></div>
      </div>
    </div>
  </div>

  <!-- <script>
    function actualizarComidasDomingo(){
      const comidasDomingo = [
        window.comida1 || "Comida 1 no disponible",
        window.comida2 || "Comida 2 no disponible",
        window.comida3 || "Comida 3 no disponible",
        window.comida4 || "Comida 4 no disponible"
      ];
      const domingoSection = document.querySelector('.day-section[data-day="domingo"]');
  
      if (domingoSection) {
        const mealBoxes = domingoSection.querySelectorAll('.meal-box');
        mealBoxes.forEach((box, index) => {
          box.textContent = comidasDomingo[index];
        });
      }
    };
  </script> -->

  <!-- Updates de los circulos -->
  <!-- Updates de los circulos -->
  <!-- Updates de los circulos -->
  <!-- Updates de los circulos -->

  <script>
    function updateCircle(checkbox) {
      const daySection = checkbox.closest('.day-section');
      const checkboxes = daySection.querySelectorAll('.checkbox');
      const circle = daySection.querySelector('.progress-circle');
      let checkedCount = 0;

      checkboxes.forEach(cb => {
        if (cb.checked) checkedCount++;
      });

      const percentage = (checkedCount / 4) * 100;
      circle.style.background = `conic-gradient(#4CAF50 0% ${percentage}%, #ccc ${percentage}% 100%)`;
    }
  </script>
</body>
</html>

